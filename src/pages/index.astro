---
import SpinWheel from '../components/SpinWheel.jsx';
import { prizes } from '../data/prizes.js';
import Layout from '../layouts/Layout.astro';

// --- CONFIG: Floating Lanterns ---
const lanterns = Array.from({ length: 8 }).map((_, i) => ({
  left: (i * 12) + Math.random() * 10 + '%',
  delay: Math.random() * 10 + 's',
  duration: Math.random() * 10 + 20 + 's', 
  scale: Math.random() * 0.4 + 0.6, 
  opacity: Math.random() * 0.3 + 0.4 
}));

// --- CONFIG: Gold Dust (Sparkles) ---
const sparkles = Array.from({ length: 30 }).map(() => ({
  left: Math.random() * 100 + '%',
  top: Math.random() * 100 + '%',
  delay: Math.random() * 5 + 's',
  duration: Math.random() * 2 + 3 + 's'
}));
---

<Layout title="EduQuest China">
  <main class="min-h-screen w-full relative flex flex-col items-center justify-center overflow-hidden bg-[#F9F7F2] text-gray-900 selection:bg-red-100">
    
    <div class="absolute inset-0 z-0 opacity-[0.3] pointer-events-none" id="grid-bg"></div>

    <div class="absolute inset-0 z-10 pointer-events-none overflow-hidden text-red-900/30">
        <div class="absolute top-4 left-4 w-16 md:w-32">
            <svg viewBox="0 0 100 100" fill="currentColor">
                <path d="M0,0 L50,0 L50,10 L10,10 L10,50 L0,50 Z" />
                <path d="M15,15 L40,15 L40,40 L15,40 Z M20,20 L20,35 L35,35 L35,20 Z" />
                <circle cx="27.5" cy="27.5" r="4" />
            </svg>
        </div>
        
        <div class="absolute top-4 right-4 w-16 md:w-32 transform scale-x-[-1]">
             <svg viewBox="0 0 100 100" fill="currentColor">
                <path d="M0,0 L50,0 L50,10 L10,10 L10,50 L0,50 Z" />
                <path d="M15,15 L40,15 L40,40 L15,40 Z M20,20 L20,35 L35,35 L35,20 Z" />
                <circle cx="27.5" cy="27.5" r="4" />
            </svg>
        </div>

        <div class="absolute bottom-4 left-4 w-16 md:w-32 transform scale-y-[-1]">
             <svg viewBox="0 0 100 100" fill="currentColor">
                <path d="M0,0 L50,0 L50,10 L10,10 L10,50 L0,50 Z" />
                <path d="M15,15 L40,15 L40,40 L15,40 Z M20,20 L20,35 L35,35 L35,20 Z" />
                <circle cx="27.5" cy="27.5" r="4" />
            </svg>
        </div>

        <div class="absolute bottom-4 right-4 w-16 md:w-32 transform rotate-180">
             <svg viewBox="0 0 100 100" fill="currentColor">
                <path d="M0,0 L50,0 L50,10 L10,10 L10,50 L0,50 Z" />
                <path d="M15,15 L40,15 L40,40 L15,40 Z M20,20 L20,35 L35,35 L35,20 Z" />
                <circle cx="27.5" cy="27.5" r="4" />
            </svg>
        </div>
    </div>

    <div class="absolute -top-10 -right-10 w-[200px] h-[200px] md:w-[300px] md:h-[300px] text-red-900/60 pointer-events-none z-0 rotate-12">
        <svg viewBox="0 0 100 100" fill="currentColor">
            <path d="M100,0 Q60,40 20,30" stroke="currentColor" stroke-width="3" fill="none" />
            <path d="M70,30 Q60,60 40,50" stroke="currentColor" stroke-width="2" fill="none" />
            <circle cx="20" cy="30" r="4" fill="currentColor" class="animate-pulse" />
            <circle cx="40" cy="50" r="3" fill="currentColor" />
            <circle cx="60" cy="40" r="3" fill="currentColor" />
        </svg>
    </div>

    <div class="absolute top-[10%] -left-[10%] w-[250px] md:w-[350px] text-red-900/50 animate-drift-fast z-0 pointer-events-none">
        <svg viewBox="0 0 100 60" fill="currentColor" class="w-full h-full">
            <path d="M85,35 C85,28 80,22 72,22 C70,22 68,23 66,24 C64,15 56,8 46,8 C34,8 24,16 22,27 C10,28 2,36 2,46 C2,53 8,58 15,58 L85,58 C92,58 98,53 98,46 C98,40 92,35 85,35 Z M50,50 L20,50 C20,50 15,48 18,42 C18,42 22,35 30,35 C30,35 35,35 38,38 C38,38 42,42 45,42 C45,42 50,42 50,35 C50,28 40,20 30,25 C30,25 40,12 55,15 C55,15 70,18 70,35 C70,35 70,45 60,45 C60,45 55,45 50,50 Z"/>
        </svg>
    </div>
    
    <div class="absolute bottom-[20%] -right-[10%] w-[300px] md:w-[400px] text-yellow-600/50 animate-drift-fast-reverse z-0 pointer-events-none">
         <svg viewBox="0 0 100 60" fill="currentColor" class="w-full h-full transform scale-x-[-1]">
             <path d="M85,35 C85,28 80,22 72,22 C70,22 68,23 66,24 C64,15 56,8 46,8 C34,8 24,16 22,27 C10,28 2,36 2,46 C2,53 8,58 15,58 L85,58 C92,58 98,53 98,46 C98,40 92,35 85,35 Z M50,50 L20,50 C20,50 15,48 18,42 C18,42 22,35 30,35 C30,35 35,35 38,38 C38,38 42,42 45,42 C45,42 50,42 50,35 C50,28 40,20 30,25 C30,25 40,12 55,15 C55,15 70,18 70,35 C70,35 70,45 60,45 C60,45 55,45 50,50 Z"/>
        </svg>
    </div>

    <div class="absolute inset-0 z-0 pointer-events-none overflow-hidden">
        {lanterns.map((l) => (
            <div 
                class="absolute"
                style={{
                    left: l.left,
                    bottom: '-100px',
                    opacity: l.opacity,
                    transform: `scale(${l.scale})`,
                    animation: `floatUp ${l.duration} linear infinite`,
                    animationDelay: l.delay
                }}
            >
                <svg width="40" height="60" viewBox="0 0 40 60" class="drop-shadow-lg">
                    <line x1="20" y1="45" x2="20" y2="60" stroke="#B91C1C" stroke-width="2" />
                    <rect x="5" y="10" width="30" height="35" rx="5" fill="#DC2626" />
                    <rect x="5" y="10" width="30" height="4" fill="#FCD34D" />
                    <rect x="5" y="41" width="30" height="4" fill="#FCD34D" />
                    <line x1="15" y1="10" x2="15" y2="45" stroke="#B91C1C" stroke-width="1" stroke-opacity="0.6" />
                    <line x1="25" y1="10" x2="25" y2="45" stroke="#B91C1C" stroke-width="1" stroke-opacity="0.6" />
                </svg>
            </div>
        ))}
    </div>
    
    <div class="absolute inset-0 z-0 pointer-events-none overflow-hidden">
      {sparkles.map((s) => (
        <div 
          class="absolute w-1 h-1 bg-yellow-500 rounded-full animate-twinkle"
          style={{
            left: s.left,
            top: s.top,
            animationDelay: s.delay,
            animationDuration: s.duration,
            boxShadow: '0 0 3px 1px rgba(234, 179, 8, 0.4)'
          }}
        ></div>
      ))}
    </div>

    <div class="absolute bottom-0 left-0 w-full h-[120px] md:h-[220px] z-10 pointer-events-none flex items-end justify-center">
        <svg viewBox="0 0 1000 160" preserveAspectRatio="none" class="w-full h-full drop-shadow-2xl">
             <defs>
                <pattern id="stagePattern" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse">
                    <path d="M0,0 L20,20 M20,0 L0,20" stroke="#7f1d1d" stroke-width="1" opacity="0.15"/>
                </pattern>
                
                <linearGradient id="goldShine" x1="0%" y1="0%" x2="200%" y2="0%">
                    <stop offset="0%" stop-color="#B45309" />
                    <stop offset="50%" stop-color="#FCD34D" />
                    <stop offset="100%" stop-color="#B45309" />
                    <animate attributeName="x1" from="-100%" to="100%" dur="3s" repeatCount="indefinite" />
                    <animate attributeName="x2" from="0%" to="200%" dur="3s" repeatCount="indefinite" />
                </linearGradient>
             </defs>

             <path d="M120,160 L180,90 L820,90 L880,160 Z" fill="#450a0a" opacity="0.5" />
             <path d="M0,160 L1000,160 L1000,140 L880,140 L820,90 L180,90 L120,140 L0,140 Z" fill="#991B1B" />
             <path d="M0,160 L1000,160 L1000,140 L880,140 L820,90 L180,90 L120,140 L0,140 Z" fill="url(#stagePattern)" />
             <path d="M0,140 L120,140 L180,90 L820,90 L880,140 L1000,140" stroke="url(#goldShine)" stroke-width="4" fill="none" class="drop-shadow-sm" />
             <rect x="180" y="90" width="640" height="6" fill="url(#goldShine)" opacity="0.9" />
             
             <g opacity="0.4" stroke="#500707" stroke-width="2" fill="none">
                 <path d="M220,100 Q240,120 260,100" />
                 <path d="M220,110 Q240,130 260,110" />
                 <path d="M740,100 Q760,120 780,100" />
                 <path d="M740,110 Q760,130 780,110" />
             </g>
        </svg>
    </div>

    <div class="absolute inset-0 bg-[radial-gradient(circle_at_center,transparent_40%,#F9F7F2_100%)] z-0 pointer-events-none"></div>

    <div class="z-20 text-center mb-2 md:mb-6 relative mt-4 md:mt-0">
      <div class="inline-flex items-center gap-2 px-3 py-1 md:px-4 md:py-1.5 mb-2 md:mb-4 border border-red-100 rounded-full bg-white/80 backdrop-blur-sm shadow-sm hover:shadow-md transition-all">
        <span class="w-1.5 h-1.5 md:w-2 md:h-2 rounded-full bg-red-600 animate-pulse shadow-[0_0_8px_rgba(220,38,38,0.5)]"></span>
        <span class="text-red-800 text-[7px] md:text-[9px] tracking-[0.2em] uppercase font-bold font-sans">Official Scholarship Portal</span>
      </div>

      <div class="mb-2 md:mb-4 relative z-10 flex justify-center">
        <img 
            src="/logo.svg" 
            alt="EduQuest China" 
            class="h-12 md:h-20 w-auto object-contain drop-shadow-sm hover:scale-105 transition-transform duration-500"
        />
      </div>
     
      <p class="text-gray-400 text-[9px] md:text-[11px] tracking-[0.25em] md:tracking-[0.4em] uppercase font-medium mt-1 font-sans">
        Your Journey to China Begins Here
      </p>
    </div>

    <div class="z-20 relative pb-20 md:pb-16">
      <SpinWheel client:only="react" prizes={prizes} />
    </div>

    <div class="absolute bottom-8 flex flex-col items-center gap-3 z-30 opacity-60">
       <p class="text-[8px] md:text-[9px] text-white font-sans uppercase tracking-widest">Powered by EduQuest</p>
    </div>

  </main>
</Layout>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700;900&display=swap');

  :global(body) {
    font-family: 'Lato', sans-serif;
  }

  #grid-bg {
    background-size: 50px 50px;
    background-image:
      linear-gradient(to right, #ccc 1px, transparent 1px),
      linear-gradient(to bottom, #ccc 1px, transparent 1px);
    animation: moveGrid 30s linear infinite;
  }

  @keyframes moveGrid {
    0% { background-position: 0 0; }
    100% { background-position: 50px 50px; }
  }

  @keyframes floatUp {
    0% { transform: translateY(0) rotate(0deg); }
    50% { transform: translateY(-50vh) rotate(2deg); }
    100% { transform: translateY(-110vh) rotate(-2deg); }
  }

  @keyframes drift {
    0% { transform: translateX(0); }
    50% { transform: translateX(80px); }
    100% { transform: translateX(0); }
  }
  .animate-drift-fast { animation: drift 8s ease-in-out infinite; }
  .animate-drift-fast-reverse { animation: drift 10s ease-in-out infinite reverse; }

  @keyframes twinkle {
    0%, 100% { opacity: 0; transform: scale(0.5); }
    50% { opacity: 1; transform: scale(1.2); }
  }
  .animate-twinkle { animation: twinkle 4s ease-in-out infinite; }
</style>